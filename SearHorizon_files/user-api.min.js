!function(){var a=window.UserServerApi||(window.UserServerApi={});a.cookies=a.cookies||{},a.cookies.setCookie=function(a,b,c,d,e,f){window[a]=b;var g=a+"="+b;g+=c?";expires="+new Date((new Date).getTime()+c).toGMTString():"",g+=";path="+(e||"/"),g+=d?";domain="+d:"",g+=f?";secure":"",document.cookie=g},a.cookies.getCookie=function(a){if(window[a])return window[a];for(var b=document.cookie.split(/;\s*/),c=0;c<b.length;c++)if(0===b[c].indexOf(a+"="))return b[c].substr(a.length+1);return null},a.cookies.deleteCookie=function(a){var b=window.location.host;b=b.substring(b.indexOf(".")+1),this.setCookie(a,"",-864e5,b,"/")}}(),function(){function a(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a}function b(a){return-1===a.indexOf("//www.")?a:a.replace(/\/\/www\./g,"//"+window.location.host.substr(0,window.location.host.indexOf("."))+".")}function c(a,b,c,d){var f="_"+(e.comm.jsonpCallbacks.counter++).toString(36),g=function(){clearTimeout(k),delete e.comm.jsonpCallbacks[f],document.getElementsByTagName("head")[0].removeChild(j)},h=function(a,b){g(),b.success?d(b):c(b)},i=function(){g(),c()};b+="&accept=jsonp",b+="&callback=UserServerApi.comm.jsonpCallbacks."+f,b+="&callerId="+f,b+="get"===a.toLowerCase()?"":"&_method="+a.toLowerCase();var j=document.createElement("script");j.type="text/javascript",j.src=b,j.onerror=i,document.getElementsByTagName("head")[0].appendChild(j);var k=setTimeout(i,6e4);e.comm.jsonpCallbacks[f]=h}function d(a,c,d,e){var f=new XMLHttpRequest;c=b(c),f.open(a,c+"&accept=json",!0),f.withCredentials=!0,f.onerror=f.ontimeout=f.onabort=function(){d(f)},f.onload=function(){if(f.responseText)try{var a=JSON.parse?JSON.parse:eval,b=a(f.responseText);return b.success?e(b,f):d(b,f),void 0}catch(c){}d(f)},f.send()}var e=window.UserServerApi||(window.UserServerApi={});e.comm=e.comm||{},e.comm.sendRequest=function(b,f,g,h,i){var j=[];e.getOptions().urlParams.language||(e.getOptions().urlParams.language=e.getUserLanguage()),g=a({},e.getOptions().urlParams,g);for(var k in g)if(g[k]||"boolean"==typeof g[k])if("[object Array]"===Object.prototype.toString.apply(g[k]))for(var l=0;l<g[k].length;l++)j.push(encodeURIComponent(k)+"="+encodeURIComponent(g[k][l]));else j.push(encodeURIComponent(k)+"="+encodeURIComponent(g[k]));f+=j.length?"?"+j.join("&"):"",e.getOptions().jsonpEnabled?c(b,f,h,i):d(b,f,h,i)},e.comm.jsonpCallbacks={counter:0}}(),function(){function a(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a}function b(a,b){var c="/"===a.substr(-1)?a.substring(0,a.length-1):a,d="/"===b.substr(0,1)?b.substring(1):b;return c+"/"+d}var c=window.UserServerApi||(window.UserServerApi={});c.consts={userColorServerKey:"color",userColorClientKey:"userColor"};var d={languageCookie:"wixLanguage",helperCookie:"wixClient",mainCookie:"wixSession",uidCookie:"_wixUIDX",clientIdCookie:"_wixCIDX",languages:{en:"en",es:"es",pt:"pt",fr:"fr",ru:"ru",de:"de",pl:"pl",it:"it",ja:"ja",ko:"ko",tr:"tr"},usersDomain:"https://users.wix.com/wix-users",jsonpEnabled:!0,urlParams:{source:"",suid:"",orgDocID:"null-doc-id",appUrl:window.location.href,urlThatUserRedirectedFrom:window.location.href}},e=function(){for(var a={},b=window.location.search.slice(1).split("&"),c=0;c<b.length;c++)a[b[c].split("=")[0]]=decodeURIComponent(b[c].split("=")[1]);return a}(),f={};f[c.consts.userColorClientKey]=c.consts.userColorServerKey;var g={login:{method:"GET",url:"/auth/login",queryParams:a({},f)},loginByGuid:{method:"GET",url:"/auth/loginByGuid",queryParams:a({},f)},socialLogin:{method:"GET",url:"/social/login/{providerId}",pathVariables:["providerId"],queryParams:a({},f)},getSocialConnections:{method:"GET",url:"/social/connection"},createSocialConnection:{method:"POST",url:"/social/connection/{providerId}",pathVariables:["providerId"]},revokeSocialConnection:{method:"DELETE",url:"/social/connection/{providerId}",pathVariables:["providerId"]},createUser:{method:"GET",url:"/auth/register",queryParams:a({},f)},forgotPassword:{method:"GET",url:"/auth/forgotPassword"},getUserDetails:{method:"GET",url:"/user/getUserDetails"},updateUser:{method:"GET",url:"/user/update"},setLanguage:{method:"GET",url:"/user/setLanguage"}};a(c,{setOptions:function(b){return b&&(b=a({},b),a(d.urlParams,b.urlParams||{}),delete b.urlParams,a(d,b)),c},getOptions:function(){return d},userAction:function(f,h,i,j){var k,l=b(d.usersDomain,g[f].url);if(g[f].pathVariables)for(k=0;k<g[f].pathVariables.length;k++)l=l.replace("{"+g[f].pathVariables[k]+"}",h[g[f].pathVariables[k]]),delete h[g[f].pathVariables[k]];if(g[f].queryParams){var m={},n=g[f].queryParams;for(k in n)e[k]?m[n[k]]=e[k]:d[k]&&(m[n[k]]=d[k]);h=a(m,h)}c.comm.sendRequest(g[f].method,l,h,i,j)},getClientParams:function(){var b=c.cookies.getCookie(d.helperCookie);if(b){'"'===b[0]&&'"'===b[b.length-1]&&(b=JSON.parse(b));var e=b.split("|"),f={userName:e[0],email:e[1],mailStatus:e[2],permissions:e[3],isSessionNew:e[4],isSessionValid:e[5],userID:e[6]};return e[7]&&a(f,JSON.parse(e[7])),f}return null},getUserLanguage:function(){var a=window.location.host.split("."),b=2===a[0].length?a[0]:null;return b=b||c.cookies.getCookie(d.languageCookie),b=b||navigator.language||navigator.browserLanguage,d.languages[b]||"en"},login:function(b,d,e,f,g,h){c.userAction("login",a({email:b,password:d,rememberMe:e,enhanced:0},h),f,g)},socialLogin:function(b,d,e,f){c.userAction("socialLogin",a({providerId:b},d),e,f)},getSocialConnections:function(a,b){c.userAction("getSocialConnections",null,a,b)},createSocialConnection:function(b,d,e,f){c.userAction("createSocialConnection",a({providerId:b},d),e,f)},revokeSocialConnection:function(a,b,d){c.userAction("revokeSocialConnection",{providerId:a},b,d)},loginByGuid:function(a,b,d,e,f){c.userAction("loginByGuid",{guid:a,password:b,rememberMe:d,enhanced:0},e,f)},createUser:function(a,b,d,e,f){var g={email:a,password:b};g.sendEmail=f&&f.sendEmail===!1?"false":"true",c.userAction("createUser",g,d,e)},forgotPassword:function(a,b,d){c.userAction("forgotPassword",{email:a},b,d)},setLanguage:function(a,b,e){d.urlParams.language=a,c.userAction("setLanguage",null,b,e)},getUserDetails:function(a,b){c.userAction("getUserDetails",null,a,b)},updateUser:function(a,b,d,e,f,g,h){var i={newUserName:b,newEmail:e,optInMail:f,newPassword:d,password:a};c.userAction("updateUser",i,g,h)},getToken:function(){return c.cookies.getCookie(d.mainCookie)},isSessionValid:function(){return c.getClientParams()&&c.getToken()},isUnknownUser:function(){var a=c.cookies.getCookie(d.uidCookie);return!a||"null-user-id"===a},logout:function(){c.cookies.deleteCookie(d.mainCookie),c.cookies.deleteCookie(d.helperCookie)},getClientId:function(){var a=c.cookies.getCookie(d.clientIdCookie);return a||"null-client-id"}})}();